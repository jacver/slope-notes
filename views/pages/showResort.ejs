<head>
  <%- include('../partials/head'); %>
</head>
<body class="container">
  <header><%- include('../partials/header'); %></header>

  <div class="list-group page-title-container list-group-item active">
    <h1 class="page-title"><%= query %></h1>
    <a class="btn-anchor btn-secondary" href="/date/new">
      <i class="fa-solid fa-plus"></i>
      Add Date/Run
    </a>
  </div>


  <div class="card-columns">

    <% dates.forEach(date => { %>
    <div class="card bg-secondary">
      <div class="card-header">

        <% let formattedDate = ('0' + (date.date.getMonth()+1)).slice(-2) + 
        '-'
        + ('0' + date.date.getDate()).slice(-2) + 
        '-' 
        + date.date.getFullYear()
        %>

        <div><%= formattedDate %></div>
        <div>
          <form method="POST" action="/date/<%=date.resortName%>/<%= formattedDate %>?_method=DELETE">
            <input
              type="submit"
              class="btn-outline-light btn-delete-date"
              title="Delete"
              value="X"
            />
          </form>
        </div>
      </div>

      <div class="card-body card-body-dates text-center">
        <div class="card-buttons-container">
          <a href="/date/<%=date.resortName%>/<%=formattedDate%>">
            <button title="View Date" class="btn btn-primary btn-view-date">
              View
            </button>
          </a>
        </div>
      </div>
    </div>
    <% }) %>
  </div>

  <footer><%- include('../partials/footer'); %></footer>
</body>
